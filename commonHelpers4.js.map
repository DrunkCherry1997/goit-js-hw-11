{"version":3,"file":"commonHelpers4.js","sources":["../src/js/searchimg.js"],"sourcesContent":["// Для IziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Для SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const form = document.getElementById(\"searchForm\");\n  const searchInput = document.getElementById(\"searchInput\");\n  const loader = document.getElementById(\"loader\");\n  const gallery = document.getElementById(\"gallery\");\n\n  const apiKey = \"42055816-5ec499474650eadfc6b07a02f\";\n  const apiUrl = \"https://pixabay.com/api/\";\n\n  const lightbox = new SimpleLightbox(\".gallery a\");\n\n  form.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const searchTerm = searchInput.value.trim();\n\n    if (searchTerm === \"\") {\n      iziToast.error({\n        title: \"Error\",\n        message: \"Please enter a search term.\",\n      });\n      return;\n    }\n\n    loader.classList.remove(\"hidden\");\n    gallery.innerHTML = \"\";\n\n    try {\n      const response = await fetch(\n        `${apiUrl}?key=${apiKey}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true`\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data.hits.length === 0) {\n        iziToast.warning({\n          title: \"No Results\",\n          message: \"Sorry, there are no images matching your search query. Please try again!\",\n        });\n      } else {\n        const images = data.hits.map((hit) => ({\n          webformatURL: hit.webformatURL,\n          largeImageURL: hit.largeImageURL,\n          tags: hit.tags,\n          likes: hit.likes,\n          views: hit.views,\n          comments: hit.comments,\n          downloads: hit.downloads,\n        }));\n\n        displayImages(images);\n      }\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n      iziToast.error({\n        title: \"Error\",\n        message: \"An error occurred while fetching data. Please try again.\",\n      });\n    } finally {\n      loader.classList.add(\"hidden\");\n    }\n  });\n\n  function displayImages(images) {\n    const galleryHTML = images\n      .map(\n        (image) => `\n        <div class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${image.tags}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          </a>\n          <div class=\"image-details\">\n            <p>Likes: ${image.likes}</p>\n            <p>Views: ${image.views}</p>\n            <p>Comments: ${image.comments}</p>\n            <p>Downloads: ${image.downloads}</p>\n          </div>\n        </div>\n      `\n      )\n      .join(\"\");\n\n    gallery.innerHTML = galleryHTML;\n\n    // Refresh SimpleLightbox after adding new images\n    lightbox.refresh();\n  }\n});"],"names":["form","searchInput","loader","gallery","apiKey","apiUrl","lightbox","SimpleLightbox","event","searchTerm","iziToast","response","data","images","hit","displayImages","error","galleryHTML","image"],"mappings":"6vBASA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAO,SAAS,eAAe,YAAY,EAC3CC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,eAAe,SAAS,EAE3CC,EAAS,qCACTC,EAAS,2BAETC,EAAW,IAAIC,EAAe,YAAY,EAEhDP,EAAK,iBAAiB,SAAU,MAAOQ,GAAU,CAC/CA,EAAM,eAAc,EACpB,MAAMC,EAAaR,EAAY,MAAM,KAAI,EAEzC,GAAIQ,IAAe,GAAI,CACrBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACjB,CAAO,EACD,MACD,CAEDR,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAQ,UAAY,GAEpB,GAAI,CACF,MAAMQ,EAAW,MAAM,MACrB,GAAGN,CAAM,QAAQD,CAAM,MAAMK,CAAU,0DAC/C,EAEM,GAAI,CAACE,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAMC,EAAO,MAAMD,EAAS,OAE5B,GAAIC,EAAK,KAAK,SAAW,EACvBF,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,0EACnB,CAAS,MACI,CACL,MAAMG,EAASD,EAAK,KAAK,IAAKE,IAAS,CACrC,aAAcA,EAAI,aAClB,cAAeA,EAAI,cACnB,KAAMA,EAAI,KACV,MAAOA,EAAI,MACX,MAAOA,EAAI,MACX,SAAUA,EAAI,SACd,UAAWA,EAAI,SAChB,EAAC,EAEFC,EAAcF,CAAM,CACrB,CACF,OAAQG,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CN,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0DACjB,CAAO,CACP,QAAc,CACRR,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACL,CAAG,EAED,SAASa,EAAcF,EAAQ,CAC7B,MAAMI,EAAcJ,EACjB,IACEK,GAAU;AAAA;AAAA,qBAEEA,EAAM,aAAa,yCAAyCA,EAAM,IAAI;AAAA,wBACnEA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,wBAGtCA,EAAM,KAAK;AAAA,wBACXA,EAAM,KAAK;AAAA,2BACRA,EAAM,QAAQ;AAAA,4BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,OAIpC,EACA,KAAK,EAAE,EAEVf,EAAQ,UAAYc,EAGpBX,EAAS,QAAO,CACjB,CACH,CAAC"}